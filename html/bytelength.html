<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <script>
        var getBytesLength = function(str) {
// 在GBK编码里，除了ASCII字符，其它都占两个字符宽
            return str.replace(/[^\x00-\xff]/g, 'xx').length;}
        var getParam = function(str){
            var res = "";
            const sth = "M57Q01RQPVOST0001                        tpM57Q013";
            var l = getBytesLength(str);
            console.log(l);
            var l1 ,l2 ,s1 = l.toString(), s2 = (l + 58).toString(), i;
            l1 = 8 - s1.length;
            l2 = 8 - s2.length;
            for(i = 0; i < l1; i ++){
                s1 = "0" + s1;
            }
            for(i = 0; i < l2; i ++){
                s2 = "0" + s2;
            }
            res = s2 + s1 + sth + str;
            return res;

        };
        console.log(getParam('<BUSINESSCODE>01</><ID>220121197001126423</><NAME>杨凤光</><CHKFLG>1</><IDTYPE>01</><INPUTFLAG>1</><INTERBUSCODE>01</><CODETYPE>M57Q01</><TranCode>111</><TermDate>2015-1-4</><TermTime>19228</><TermSeq>013938</><Brc>00000000</><Teller>001247</><ChannelId>12</><AuthFlag>0</><FeeFlag>0</><ENTRUSTDATE>20151419228</><FLAG>1</>'));
    </script>
</head>
<body>

</body>
</html>